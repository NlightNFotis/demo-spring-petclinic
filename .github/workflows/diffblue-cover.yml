# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: Automated Test Generation with Diffblue Cover

on: pull_request

jobs:  
  test:
    runs-on: ubuntu-latest
    container: diffblue/cover-cli:latest-jdk17
    steps:
    - name: Hello World Echo
      run: echo "Hello world from Diffblue Cover"
    - name: Build PetClinic
      run: ./mvnw package
    - name: Run Diffblue Cover
      run: dcover ci activate validate --maven create --maven
